<!DOCTYPE html>
<html>
	<head>
		<script>!!pdfTools!!</script>
		<script>
			var holderConfigJSON = '!!configJSON!!';
			var vaccinationJSON = '!!dccJSON!!';
			var locale = '!!locale!!';
			
			var holderConfig = JSON.parse(holderConfigJSON);
			var vaccination = JSON.parse(vaccinationJSON);
			
			var proofs = pdfTools.parseProofData(vaccination, holderConfig, locale);
			var options = {
				proofs,
				locale: locale,
				qrSizeInCm: 8,
				createdAt: new Date(),
				internationalProofScanned: false,
			};
			
			pdfTools.getDocument(options).then( function(doc) {
				
				webkit.messageHandlers.coronacheck.postMessage({"doc":doc.output('datauristring')});
			}).catch( function(err) {
				console.error('Could not retrieve document:', err)
				webkit.messageHandlers.coronacheck.postMessage({"error":err});
			});
		</script>
	</head>
	<body>
		<div id="page"></div>
	</body>
</html>
